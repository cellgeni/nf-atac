process {
    withName: '.*ANNDATA_CONCAT' {
        ext.output = 'combined_anndata_object.h5ad'
        cpus       = 4
        queue      = { (task.attempt > 1) ? 'hugemem' : 'normal' }
        memory     = { 60.GB + 500.GB * (task.attempt - 1) }
        publishDir = [
            mode     : params.publish_mode,
            path     : "${params.output_dir}",
            overwrite: true
        ]
    }
}