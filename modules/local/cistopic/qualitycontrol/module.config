process {
    withName: '.*CISTOPIC_QUALITYCONTROL' {
        ext.args      = {
            [
                "--tss_flank_window 2000",
                "--tss_smoothing_rolling_window 10",
                "--tss_window 50",
                "--tss_min_norm 0.2",
                "--min_fragments_per_cb 10",
                false ? "--use-pyranges" : "",
                false ? "--dont-collapse_duplicates" : ""
            ].join(' ')
        }
        cpus       = 4
        queue      = { (task.attempt > 1) ? 'hugemem' : 'normal' }
        memory     = { 100.GB + 500.GB * (task.attempt - 1) }
        publishDir = [
            mode     : params.publish_mode,
            path     : { "${params.output_dir}/cistopic/${meta.id}" },
            pattern  : "*qc",
            overwrite: true
        ]
    }
}